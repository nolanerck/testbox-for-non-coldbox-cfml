<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<title>Testing My Non-ColdBox Site With TestBox</title>

		<link rel="stylesheet" href="../Reveal.js/css/reveal.css">
		<link rel="stylesheet" href="../Reveal.js/css/theme/moon.css" id="theme">
		<style>
			.reveal h2
			{ 
				text-transform: none; 
				font-size: 60px;
			}

			.reveal ul li, .reveal p
			{
				font-size: 34px;
			}

			.highlight 
			{ 
				color: green 
			}

			.align-left
			{
				text-align: left;
			}
		</style>		
	</head>

	<body>

		<div class="reveal">

			<div class="slides">

				<section>
					<h2>Testing My Non-ColdBox Site<br>With TestBox</h2>
					<p>Nolan Erck</p>
					<p>South of Shasta Consulting</p>
				</section>

				<section>
					<h2>About Me</h2>
					<ul>
						<li>Software Consultant (southofshasta.com)
							<ul>
								<li>Software Development, Training, Design</li>
							</ul>
						</li>

						<li>ColdFusion, C++, Java, SQL, HTML/CSS, Angular, Vue, React, PHP, etc...</li>
						<li>Manager of SacInteractive User Group</li>
						<li>Reformed Video Game Developer (Grim Fandango, SimPark, StarWars Rogue Squadron, etc).</li>
						<li>Music Junkie</li>
					</ul>
				</section>

				<section data-background-image="./images/record-collection.jpg" data-background-size="contain">
				</section>

				<section data-background-image="./images/charlie_brown.png" data-background-size="contain">
				</section>

				<section>
					<h2>Slide deck and code samples are here:</h2>
					<p>github.com/nolanerck<br />testbox-for-non-coldbox-cfml</p>
				</section>

				<section>
					<h2>Today's Agenda</h2>
					<ul>
						<li>Testing and Misconceptions</li>
						<li>TestBox Misconceptions</li>
						<li>How to install, start using TestBox?</li>
						<li>Code Samples</li>
						<li>Tips and Other Resources</li>
					</ul>
				</section>

				<section>
					<h2>Testing</h2>
					<ul>
						<li>Everyone knows they <em>should</em> test their code.</li>
						<li>But where do you start?</li>
						<li>Manually via a co-worker down the hall?</li>
						<li>Do we have an official QA team?</li>
						<li>Are they white box or black box QA?</li>
						<li>Do we even know the difference?</li>
					</ul>
				</section>

				<section>
					<h2>What / Where Do We Start Testing?</h2>
					<ul>
						<li>Many different types of testing, many layers.</li>
						<li>UI / UX?</li>
						<li>Form submissions?</li>
						<li>With and without client-side validation turned on?</li>
						<li>Database queries?</li>
						<li>Other business logic?</li>
						<li>So many things!!!</li>
					</ul>
				</section>

				<section>
					<h2>Different Types of Testing</h2>
					<ul>
						<li>Unit</li>
						<li>UI/UX</li>
						<li>Integration</li>
						<li>Regression</li>
						<li>BDD</li>
					</ul>
				</section>

				<section><h2>So what do we start testing first?!</h2></section>

				<section>
					<h2>Just Start</h2>
					<ul>
						<li>Pick something, anything.</li>
						<li>A page</li>
						<li>Or a query</li>
						<li>Or a custom tag</li>
						<li>Or a function</li>
						<li>Or a [annoying thing in my app]</li>
						<li>...just start</li>
					</ul>
				</section>

				<section>
					<h2>Testing and Misconceptions</h2>
					<p><em>"Testing is the QA department's job."</em></p>
					<ul>
						<li>That's no reason to write broken code.</li>
						<li>We <em>all</em> benefit from more types of testing!</li>
						<li>Human QA is beneficial, no matter how many automated tests we have.
							<br>
							(Accessibility cannot be 100% tested via automation.)
						</li>
					</ul>
				</section>

				<section>
					<h2>Testing and Misconceptions</h2>
					<p><em>"Writing tests slows us down, takes too long."</em></p>
					<ul>
						<li>Maybe at first, or later in a project's lifecycle.</li>
						<li>It's a new discipline, takes time to learn.</li>
						<li>But does help everyone.</li>
						<li>Writing tests gets easier (and quicker) the more you do it.</li>
						<li>It's easy to start doing TDD.</li>
					</ul>
				</section>

				<section>
					<h2>What's the difference between<br>junior and senior developers?</h2>
					<p class="fragment">Senior developers test their code.</p>
				</section>

				<section>
					<h2>What Is TestBox?</h2>
					<ul>
						<li>CFML testing framework for automating testing</li>
						<li>Supports BDD and xUnit style testing</li>
						<li>Free and open source</li>
						<li>Works on both ACF and Lucee</li>
					</ul>
				</section>

				<section>
					<h2>TestBox Misconceptions</h2>
					<p><em>"It's a testing framework, so I have to rewrite my entire app."</em></p>
					<ul>
						<li>Nope! Leave your code as-is<sup>*</sup></li>
						<li>Testing frameworks != MVC frameworks</li>
						<li>TestBox lives in its own folders, separate from your app</li>
					</ul>
					<p><sup>*</sup>Your mileage may vary</p>
				</section>

				<section>
					<h2>TestBox Misconceptions</h2>
					<p><em>"It's a 'Box' thing, therefore it requires ColdBox"</em></p>
					<ul>
						<li>Nope again!</li>
						<li>TestBox is a self-contained project,<br />totally separate from ColdBox</li>
						<li>(Though it does come with ColdBox if you're using that)</li>
					</ul>
				</section>

				<section>
					<h2>TestBox Misconceptions</h2>
					<p><em>"I bet this is super hard to install and configure"</em></p>
					<ul>
						<li>Nope again again!</li>
						<li>Install CommandBox</li>
						<li>Type "box install testbox"</li>
						<li>Boom, done.</li>
					</ul>
				</section>

				<section>
					<h2>TestBox Misconceptions</h2>
					<p><em>"My app is older. We're not using OOP.<br>This won't work for us."</em></p>
					<ul>
						<li>Nope x 3!</li>
						<li>The more modular / encapsulated your code is, the better</li>
						<li>But doesn't have to use OOP</li>
						<li>Several demos today will use no CFCs at all!</li>
					</ul>
				</section>

				<section>
					<h2>Just Start</h2>
				</section>

				<section>
					<h2>Okay so I've installed TestBox. Now What?</h2>
					<ul>
						<li>Start testing!</li>
						<li>Pick a folder, write some Test CFCs</li>
						<li>Use the Test Runner to see the results</li>
					</ul>
				</section>

				<section>
					<h2>Let's get started...</h2>
				</section>

				<section>
					<h2>First things first...</h2>
				</section>

				<section>
					<h2>Install CommandBox!</h2>
				</section>

				<section>
					<h2>CommandBox</h2>
					<ul>
						<li>Useful for <em>all</em> CFML projects</li>
						<li>Both old and new apps benefit</li>
						<li>Legacy, OOP, and in between</li>
						<li>The "Node.js" for CFML</li>
					</ul>
				</section>

				<section>
					<h2>Installing TestBox</h2>
					<ul>
						<li>"box install testbox"</li>
					</ul>
				</section>

				<section>
					<h2>TestBox in the box.json file</h2>
					<img src="./images/box-json-file.png" alt="box.json example file">
				</section>

				<section>
					<h2>So How Do You Write A Test?!</h2>
					<ul>
						<li>Well, what does your app <em>do</em>?!</li>
						<li>These are "Unit Tests"</li>
						<li>We're testing the individual units of business logic</li>
					</ul>
				</section>

				<section>
					<h2>How Do I Run The Tests?</h2>
					<ul>
						<li>Default way:<br>
							http://sitename/testbox/tests/runner.cfm
						</li>
						<li>Tests live in /testbox/tests folder by default</li>
						<li>You can pick a different location</li>
					</ul>
				</section>

				<section>
					<h2>Runner.cfm</h2>
					<img src="./images/runner-cfm-file.png" alt="Runner.cfm example">
				</section>

				<section>
					<h2>Sample Test File</h2>
					<img src="./images/first-unit-test.png" alt="Sample Testbox test">
				</section>

				<section>
					<h2>Sample Test File Results</h2>
					<img src="./images/first-unit-test-results.png" alt="Testbox results screenshot">
				</section>

				<section>
					<h2>More on Runner.cfm</h2>
					<ul>
						<li>Configure your tests</li>
						<li>URL varaibles</li>
						<li>All of them have defaults</li>
						<li>http://sitename/.../runner.cfm will always work</li>
						<li>Also:<br>
							http://sitename/.../runner.cfm?reporter=json<br>
							http://sitename/.../runner.cfm?directory=/MyTests/1/<br>
							http://sitename/.../runner.cfm?directory=/MyTests/<br>
							http://sitename/MyTests/LoginTests.cfc?method=runremote
						</li>
					</ul>
				</section>

				<section>
					<h2>Our Demo App</h2>
				</section>

				<section>
					<h2>Our Tests</h2>
				</section>

				<section>
					<h2>Unit Tests</h2>
					<img src="./images/xunit-test-xample.png" alt="xUnit test example">
				</section>

				<section>
					<h2>Behavior Driven Development (BDD)</h2>
					<ul>
						<li>The "story" like syntax</li>
						<li>The describe() and it() stuff</li>
						<li>Does the same thing as Unit Tests</li>
						<li>Different verbiage</li>
					</ul>
				</section>

				<section>
					<h2>BDD Test Example</h2>
					<img src="./images/bdd-test-example.png" alt="BDD text example">
				</section>

				<section>
					<h2>So which is better?</h2>
					<ul>
						<li>xUnit - more procedural looking syntax</li>
						<li>BDD - more functional syntax</li>
						<li>BDD uses closure support
							<ul>
								<li>If 1 test throws an exception, it doesn't kill the entire test suite</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>BDD style is common in other stacks</h2>
					<img src="images/angular-tests.png" alt="Angular test example" />
				</section>

				<section>
					<h2>There's also...MockBox!</h2>
					<ul>
						<li>Comes with TestBox automatically</li>
						<li>No extra installation required</li>
						<li>Mocking = making fake versions of real CFCs</li>
						<li>MovieService.cfc</li>
						<li>Test 5-Mock</li>
					</ul>
				</section>

				<section>
					<h2>Things to Keep In Mind</h2>
					<ul>
						<li>You don't have to test <em>everything</em> at once.</li>
						<li>Add tests when you add new features so it's not overwhelming.</li>
						<li>Legacy apps <em>can</em> be tested.<br>
							But the better your app is structured, the easier it is to test.</li>
						<li>TestBox 2.x supports older versions of CF than 3.x</li>
						<li>Tests don't run in top-down sequence.</li>
					</ul>
				</section>

				<section>
					<h2>Tests should be dumb</h2>
					<ul>
						<li>Avoid fancy programming concepts</li>
						<li>Recursion, fancy data structures, giant for() loops</li>
						<li>These have to be <em>tested</em></li>
						<li>K.I.S.S.</li>
					</ul>
				</section>

				<section>
					<h2>Tests should be dumb (cont)</h2>
					<ul>
						<li>Okay to copy/paste similar tests. They'll fail if they're wrong.</li>
						<li>More self-documenting on a per-test basis.</li>
						<li>Easier for "new devs" to read the 'story' of what the test should do.</li>
						<li>New devs also means "you in 6 months, trying to remember". </li>
					</ul>
				</section>

				<section>
					<h2>Other Resources</h2>
					<ul>
						<li>testbox.ortusbooks.com</li>
						<li>Ortus Website</li>
						<li>OrtusSolusions Slack, Google Groups</li>
						<li>This conference</li>
						<li>South of Shasta Consulting</li>
					</ul>
				</section>

				<section>
					<h2>Other Resources (cont)</h2>
					<ul>
						<li>VS Code Extention - vscode-testbox</li>
						<li>ValidateThis</li>
						<li>"Automate Thyself", Luis Majano's CF.Objective preso</li>
						<li>"Writing My First Unit Tests With MXUnit And ColdFusion" - Ben Nadel</li>
					</ul>
				</section>

				<section>
					<h2>Non-CFML Specific Resources</h2>
					<ul>
						<li>Jenkins</li>
						<li>BitBucket Pipelines</li>
						<li>Cypress.io (the new Selenium)</li>
						<li>Codecept.js</li>
						<li>CommandBox Task Runners!</li>
					</ul>
				</section>

				<section><h2>30 Minutes a Day</h2></section>

				<section>
					<h2>Questions? Comments?</h2>
					<ul>
						<li>southofshasta.com</li>
						<li>nolan@southofshasta.com</li>
						<li>Twitter: @southofshasta</li>
						<li>Github: nolanerck</li>
					</ul>
					<p>Thanks!</p>
				</section>

			</div>
		</div>

		<script src="../Reveal.js/js/reveal.js"></script>

		<script>
			Reveal.initialize();

			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '/Reveal.js/css/print/pdf.css' : '/Reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

	</body>
</html>